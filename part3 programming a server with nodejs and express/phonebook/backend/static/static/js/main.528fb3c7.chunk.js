(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{44:function(e,n,t){},45:function(e,n,t){"use strict";t.r(n);var r=t(2),c=t.n(r),a=t(18),u=t.n(a),o=t(19),i=t(9),s=t(3),d=t(5),j=t.n(d),b="/api/persons",l=function(){return j.a.get(b).then((function(e){return e.data}))},h=function(e){return j.a.post(b,e).then((function(e){return e.data}))},f=function(e,n){return j.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))},O=function(e){return j.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))},m=t(0),p=function(e){var n=e.search,t=e.handleSearch;return Object(m.jsxs)("div",{children:["filter shown with: ",Object(m.jsx)("input",{value:n,onChange:t})]})},v=function(e){var n=e.person,t=e.deletePerson;return Object(m.jsxs)("div",{children:[n.name," ",n.number,Object(m.jsx)("button",{onClick:function(){return t(n)},children:"delete"})]})},x=function(e){var n=e.persons,t=e.deletePerson;return Object(m.jsx)(m.Fragment,{children:n.map((function(e){return Object(m.jsx)(v,{person:e,deletePerson:t},e.id)}))})},w=function(e){return Object(m.jsxs)("form",{onSubmit:e.addPerson,children:[Object(m.jsxs)("div",{children:["name: ",Object(m.jsx)("input",{value:e.newName,onChange:e.handleNameChange})]}),Object(m.jsxs)("div",{children:["number: ",Object(m.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{type:"submit",children:"add"})})]})},g=function(e){var n=e.message,t=e.type;if(null===n)return null;var r="message ".concat(t);return Object(m.jsx)("div",{className:r,children:n})},C=function(){var e=Object(r.useState)([]),n=Object(s.a)(e,2),t=n[0],c=n[1],a=Object(r.useState)(""),u=Object(s.a)(a,2),d=u[0],j=u[1],b=Object(r.useState)(""),v=Object(s.a)(b,2),C=v[0],N=v[1],S=Object(r.useState)(""),k=Object(s.a)(S,2),P=k[0],y=k[1],A=Object(r.useState)(null),D=Object(s.a)(A,2),E=D[0],I=D[1],J=Object(r.useState)("success"),L=Object(s.a)(J,2),B=L[0],F=L[1],M=t.filter((function(e){return e.name.toLowerCase().includes(P.toLowerCase())})),T=function(e,n){F(n),I(e),setTimeout((function(){return I(null)}),3e3)};return Object(r.useEffect)((function(){l().then((function(e){return c(e)}))}),[]),Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Phonebook"}),Object(m.jsx)(g,{message:E,type:B}),Object(m.jsx)(p,{search:P,handleSearch:function(e){return y(e.target.value)}}),Object(m.jsx)("h3",{children:"Add a new"}),Object(m.jsx)(w,{addPerson:function(e){e.preventDefault();var n=t.map((function(e){return e.name})).indexOf(d),r=n>=0?"Updated":"Added",a=null;if(n>=0){var u=t[n];if(!window.confirm("".concat(u.name," is already added to phonebook, replace the old number with a new one?")))return;a=f(u.id,Object(i.a)(Object(i.a)({},u),{},{number:C})).then((function(e){var r=Object(o.a)(t);return r[n]=e,r}))}else a=h({name:d,number:C}).then((function(e){return t.concat(e)}));a.then((function(e){T("".concat(r," ").concat(d),"success"),c(e),j(""),N("")})).catch((function(e){n>=0&&(T("Information of ".concat(d," has already been removed from server"),"error"),c(t.filter((function(e){return e.id!==t[n].id}))))}))},newName:d,handleNameChange:function(e){return j(e.target.value)},newNumber:C,handleNumberChange:function(e){return N(e.target.value)}}),Object(m.jsx)("h3",{children:"Numbers"}),Object(m.jsx)(x,{persons:M,deletePerson:function(e){window.confirm("Delete ".concat(e.name,"?"))&&O(e.id).then((function(){return c(t.filter((function(n){return n.id!==e.id})))}))}})]})};t(44);u.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(C,{})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.528fb3c7.chunk.js.map